<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M87 - Makers of Moondream</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            overflow: hidden;
            font-family: 'Courier New', Courier, monospace;
        }

        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1;
        }

        .ui {
            position: fixed;
            z-index: 10;
            color: #fff;
            pointer-events: none;
        }

        .logo {
            top: 2.5rem;
            left: 50%;
            transform: translateX(-50%);
            font-size: clamp(2rem, 6vw, 4rem);
            font-weight: normal;
            letter-spacing: 0.3em;
            text-indent: 0.3em;
        }

        .tagline {
            bottom: 2.5rem;
            left: 2.5rem;
            font-size: clamp(0.65rem, 1.2vw, 0.85rem);
            letter-spacing: 0.12em;
            pointer-events: auto;
        }

        .tagline a {
            color: #fff;
            opacity: 0.75;
            text-decoration: underline;
            text-underline-offset: 3px;
            transition: opacity 0.3s ease;
        }

        .tagline a:hover {
            opacity: 1;
        }

        .tagline span {
            opacity: 0.5;
        }

        .contact {
            bottom: 2.5rem;
            right: 2.5rem;
            pointer-events: auto;
        }

        .contact a {
            font-size: clamp(0.65rem, 1.2vw, 0.85rem);
            color: #fff;
            opacity: 0.5;
            text-decoration: none;
            letter-spacing: 0.08em;
            transition: opacity 0.3s ease;
        }

        .contact a:hover {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div id="canvas-container"></div>
    
    <h1 class="ui logo">M87</h1>
    <p class="ui tagline"><span>makers of </span><a href="https://moondream.ai">moondream</a></p>
    <div class="ui contact">
        <a href="mailto:contact@m87.ai">contact@m87.ai</a>
    </div>

    <script>
        let stars = [];
        const numStars = 250;
        let time = 0;
        let glowBuffer;
        let cx, cy, baseRadius, safeZone;
        
        function setup() {
            let canvas = createCanvas(windowWidth, windowHeight);
            canvas.parent('canvas-container');
            
            glowBuffer = createGraphics(width, height);
            
            cx = width / 2;
            cy = height / 2;
            baseRadius = min(width, height) * 0.07;
            safeZone = baseRadius * 4;
            
            for (let i = 0; i < numStars; i++) {
                stars.push(createStar(true));
            }
        }
        
        function createStar(initial = false) {
            let star = {
                size: random(0.5, 1.5),
                brightness: random(40, 120),
                speed: random(0.05, 0.15)
            };
            
            if (initial) {
                let attempts = 0;
                do {
                    star.x = random(width);
                    star.y = random(height);
                    let d = dist(star.x, star.y, cx, cy);
                    if (d > safeZone || attempts > 20) break;
                    attempts++;
                } while (true);
            } else {
                star.x = width + random(20, 100);
                star.y = random(height);
            }
            
            star.baseX = star.x;
            star.baseY = star.y;
            
            return star;
        }

        function draw() {
            background(0);
            
            time += 0.001;
            
            cx = width / 2;
            cy = height / 2;
            
            drawStars();
            
            drawGlowToBuffer();
            drawingContext.filter = 'blur(12px)';
            image(glowBuffer, 0, 0);
            drawingContext.filter = 'none';
        }
        
        function drawStars() {
            for (let i = 0; i < stars.length; i++) {
                let star = stars[i];
                
                star.baseX -= star.speed;
                
                if (star.baseX < -50) {
                    stars[i] = createStar(false);
                    continue;
                }
                
                let dx = star.baseX - cx;
                let dy = star.baseY - cy;
                let d = sqrt(dx * dx + dy * dy);
                
                let drawX = star.baseX;
                let drawY = star.baseY;
                let alpha = star.brightness;
                
                if (d < safeZone && d > baseRadius * 0.5) {
                    let angle = atan2(dy, dx);
                    let lensStrength = pow(map(d, baseRadius * 0.5, safeZone, 1, 0), 0.7);
                    
                    let deflection = lensStrength * PI * 0.2;
                    let newAngle = angle + deflection * sign(sin(angle));
                    let newDist = d * (1 + lensStrength * 0.2);
                    
                    drawX = cx + cos(newAngle) * newDist;
                    drawY = cy + sin(newAngle) * newDist;
                }
                
                if (d < safeZone) {
                    alpha *= pow(map(d, baseRadius, safeZone, 0, 1), 0.5);
                }
                
                if (alpha > 1) {
                    noStroke();
                    fill(255, constrain(alpha, 0, 255));
                    ellipse(drawX, drawY, star.size);
                }
            }
        }
        
        function drawGlowToBuffer() {
            glowBuffer.clear();
            glowBuffer.noStroke();
            
            let glowCx = cx + sin(time * 3) * 3;
            let glowCy = cy + cos(time * 2) * 2;
            
            let resolution = 3;
            let extent = baseRadius * 3;
            
            for (let x = glowCx - extent; x < glowCx + extent; x += resolution) {
                for (let y = glowCy - extent; y < glowCy + extent; y += resolution) {
                    let dx = x - glowCx;
                    let dy = y - glowCy;
                    let d = sqrt(dx * dx + dy * dy);
                    
                    if (d > extent) continue;
                    
                    let angle = atan2(dy, dx);
                    
                    // Noise that varies the "ideal" radius at each angle - breaks up the ring
                    let radiusNoise = noise(cos(angle) * 2 + time, sin(angle) * 2 + time);
                    let localRingRadius = baseRadius * (0.7 + radiusNoise * 0.6);
                    
                    // More noise layers for blobby intensity
                    let n1 = noise(
                        cos(angle) * 1.2 + time * 2,
                        sin(angle) * 1.2 + time * 2,
                        d * 0.03
                    );
                    let n2 = noise(
                        x * 0.02 + time,
                        y * 0.02 + time,
                        0.5
                    );
                    
                    // Combine for blobby pattern
                    let noiseVal = n1 * 0.6 + n2 * 0.4;
                    
                    // Falloff based on distance from the LOCAL ring radius (not fixed)
                    let distFromLocalRing = d - localRingRadius;
                    let radialFalloff;
                    
                    if (d < localRingRadius) {
                        radialFalloff = pow(d / localRingRadius, 0.8);
                    } else {
                        radialFalloff = exp(-pow(distFromLocalRing / (baseRadius * 0.5), 2));
                    }
                    
                    // Asymmetry - brighter bottom-left, but also noisy
                    let asymmetry = map(
                        sin(angle - PI * 0.6),
                        -1, 1, 0.2, 1
                    );
                    
                    // Extra noise breaks up the angular uniformity
                    let angularBreakup = noise(angle * 3 + time * 0.5, d * 0.05);
                    angularBreakup = pow(angularBreakup, 0.5); // soften
                    
                    let intensity = radialFalloff * noiseVal * asymmetry * angularBreakup;
                    
                    if (intensity < 0.04) continue;
                    
                    let alpha = intensity * 140;
                    
                    let warmth = intensity * noiseVal;
                    let red = lerp(140, 255, warmth);
                    let green = lerp(60, 130, warmth);
                    let blue = lerp(40, 70, warmth);
                    
                    glowBuffer.fill(red, green, blue, alpha);
                    glowBuffer.ellipse(x, y, resolution * 2.5);
                }
            }
            
            // Draw irregular black center into buffer so it gets blurred
            glowBuffer.noStroke();
            for (let layer = 0; layer < 20; layer++) {
                let layerT = layer / 20;
                let baseR = baseRadius * 0.7 * (1 - layerT * 0.6);
                let alpha = pow(layerT, 0.5) * 255;
                glowBuffer.fill(0, alpha);
                
                glowBuffer.beginShape();
                for (let angle = 0; angle < TWO_PI; angle += 0.1) {
                    let radiusNoise = noise(cos(angle) * 1.5 + time * 0.3, sin(angle) * 1.5 + time * 0.3, layer * 0.05);
                    let r = baseR * (0.85 + radiusNoise * 0.3);
                    let bx = glowCx + cos(angle) * r;
                    let by = glowCy + sin(angle) * r;
                    glowBuffer.vertex(bx, by);
                }
                glowBuffer.endShape(CLOSE);
            }
        }
        
        function sign(x) {
            return x > 0 ? 1 : x < 0 ? -1 : 0;
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
            glowBuffer = createGraphics(width, height);
            cx = width / 2;
            cy = height / 2;
            safeZone = baseRadius * 4;
            
            stars = [];
            for (let i = 0; i < numStars; i++) {
                stars.push(createStar(true));
            }
        }
    </script>
</body>
</html>
